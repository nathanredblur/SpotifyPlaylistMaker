---
import AppLayout from "@/layouts/AppLayout.astro";
import { UnifiedApp } from "@/components/UnifiedApp";
import { ConfigError } from "@/components/ConfigError";

// Try to load configuration and catch any errors
let configError: Error | null = null;
try {
  // This will throw if configuration is invalid
  await import("@/config/spotify");
} catch (error) {
  configError = error instanceof Error ? error : new Error(String(error));
  console.error("Configuration error:", configError);
}
---

<AppLayout title="Organize Your Music - Spotify Playlist Maker">
  {
    configError ? (
      <ConfigError error={configError} client:only="react" />
    ) : (
      <UnifiedApp client:only="react" />
    )
  }
</AppLayout>
